# ES10 (ES2019) å®Œæ•´è¯­æ³•è¯¦è§£

> ECMAScript 2019 (ES10) å¼•å…¥äº†æ•°ç»„æ‰å¹³åŒ–ã€å¯¹è±¡è½¬æ¢ã€å­—ç¬¦ä¸²å¤„ç†ç­‰å®ç”¨ç‰¹æ€§ã€‚
<div class="doc-toc">
## ç›®å½•

1. [Array.prototype.flat()](#1-arrayprototypeflat)
2. [Array.prototype.flatMap()](#2-arrayprototypeflatmap)
3. [Object.fromEntries()](#3-objectfromentries)
4. [String.prototype.trimStart() / trimEnd()](#4-stringprototypetrimstart--trimend)
5. [Symbol.prototype.description](#5-symbolprototypedescription)
6. [å¯é€‰çš„catchç»‘å®š](#6-å¯é€‰çš„catchç»‘å®š)
7. [Function.prototype.toString()ä¿®è®¢](#7-functionprototypetostringä¿®è®¢)
8. [Array.prototype.sort()ç¨³å®šæ€§](#8-arrayprototypesortç¨³å®šæ€§)
9. [JSONæ”¹è¿›](#9-jsonæ”¹è¿›)


</div>

---

## 1. Array.prototype.flat()

### 1.1 åŸºæœ¬è¯­æ³•

`flat()` æ–¹æ³•æŒ‰ç…§æŒ‡å®šæ·±åº¦é€’å½’éå†æ•°ç»„ï¼Œå¹¶å°†æ‰€æœ‰å­æ•°ç»„è¿æ¥åˆ°ä¸€ä¸ªæ–°æ•°ç»„ä¸­ã€‚

```javascript
// é»˜è®¤æ‰å¹³åŒ–ä¸€å±‚
const arr = [1, 2, [3, 4]];
console.log(arr.flat()); // [1, 2, 3, 4]

// æŒ‡å®šæ·±åº¦
const nested = [1, [2, [3, [4]]]];
console.log(nested.flat(1)); // [1, 2, [3, [4]]]
console.log(nested.flat(2)); // [1, 2, 3, [4]]
console.log(nested.flat(3)); // [1, 2, 3, 4]

// æ— é™æ·±åº¦
console.log(nested.flat(Infinity)); // [1, 2, 3, 4]

// ç§»é™¤ç©ºé¡¹
const sparse = [1, 2, , 4, 5];
console.log(sparse.flat()); // [1, 2, 4, 5]
```

### 1.2 å®é™…åº”ç”¨åœºæ™¯

#### åœºæ™¯1ï¼šå¤„ç†åµŒå¥—æ•°æ®

```javascript
// åˆå¹¶å¤šä¸ªç”¨æˆ·çš„è®¢å•
const userOrders = [
  { user: 'å¼ ä¸‰', orders: ['è®¢å•1', 'è®¢å•2'] },
  { user: 'æå››', orders: ['è®¢å•3'] },
  { user: 'ç‹äº”', orders: ['è®¢å•4', 'è®¢å•5', 'è®¢å•6'] }
];

const allOrders = userOrders.map(u => u.orders).flat();
console.log(allOrders);
// ['è®¢å•1', 'è®¢å•2', 'è®¢å•3', 'è®¢å•4', 'è®¢å•5', 'è®¢å•6']
```

#### åœºæ™¯2ï¼šå¤„ç†åˆ†ç±»æ•°æ®

```javascript
const categories = [
  {
    name: 'ç”µå­äº§å“',
    subcategories: [
      { name: 'æ‰‹æœº', items: ['iPhone', 'Samsung'] },
      { name: 'ç”µè„‘', items: ['MacBook', 'ThinkPad'] }
    ]
  },
  {
    name: 'æœè£…',
    subcategories: [
      { name: 'ç”·è£…', items: ['è¡¬è¡«', 'è£¤å­'] }
    ]
  }
];

// è·å–æ‰€æœ‰å•†å“
const allItems = categories
  .map(cat => cat.subcategories)
  .flat()
  .map(sub => sub.items)
  .flat();

console.log(allItems);
// ['iPhone', 'Samsung', 'MacBook', 'ThinkPad', 'è¡¬è¡«', 'è£¤å­']
```

#### åœºæ™¯3ï¼šå±•å¹³çŸ©é˜µ

```javascript
const matrix = [
  [1, 2, 3],
  [4, 5, 6],
  [7, 8, 9]
];

const flattened = matrix.flat();
console.log(flattened); // [1, 2, 3, 4, 5, 6, 7, 8, 9]

// è®¡ç®—çŸ©é˜µæ‰€æœ‰å…ƒç´ çš„å’Œ
const sum = matrix.flat().reduce((a, b) => a + b, 0);
console.log(sum); // 45
```

#### åœºæ™¯4ï¼šå¤„ç†JSONå“åº”

```javascript
const apiResponses = [
  { status: 'success', data: [{ id: 1 }, { id: 2 }] },
  { status: 'success', data: [{ id: 3 }] },
  { status: 'error', data: [] }
];

const allData = apiResponses
  .filter(res => res.status === 'success')
  .map(res => res.data)
  .flat();

console.log(allData); // [{ id: 1 }, { id: 2 }, { id: 3 }]
```

---

## 2. Array.prototype.flatMap()

### 2.1 åŸºæœ¬è¯­æ³•

`flatMap()` ç›¸å½“äº `map()` åæ¥ `flat(1)`ï¼Œä½†æ•ˆç‡æ›´é«˜ã€‚

```javascript
// åŸºæœ¬ç”¨æ³•
const arr = [1, 2, 3];
const result = arr.flatMap(x => [x, x * 2]);
console.log(result); // [1, 2, 2, 4, 3, 6]

// ç­‰ä»·äº
console.log(arr.map(x => [x, x * 2]).flat());

// flatMapåªæ‰å¹³åŒ–ä¸€å±‚
const nested = arr.flatMap(x => [[x]]);
console.log(nested); // [[1], [2], [3]]
```

### 2.2 å®é™…åº”ç”¨åœºæ™¯

#### åœºæ™¯1ï¼šåˆ†è¯

```javascript
const sentences = ['Hello World', 'How are you', 'Fine thanks'];
const words = sentences.flatMap(sentence => sentence.split(' '));
console.log(words);
// ['Hello', 'World', 'How', 'are', 'you', 'Fine', 'thanks']
```

#### åœºæ™¯2ï¼šç”Ÿæˆé‡å¤å…ƒç´ 

```javascript
const items = ['a', 'b', 'c'];
const repeated = items.flatMap(item => [item, item]);
console.log(repeated); // ['a', 'a', 'b', 'b', 'c', 'c']

// ç”ŸæˆæŒ‡å®šæ•°é‡
function repeatElements(arr, times) {
  return arr.flatMap(item => Array(times).fill(item));
}
console.log(repeatElements([1, 2, 3], 3));
// [1, 1, 1, 2, 2, 2, 3, 3, 3]
```

#### åœºæ™¯3ï¼šè¿‡æ»¤å¹¶è½¬æ¢

```javascript
const numbers = [1, 2, 3, 4, 5, 6];

// åªä¿ç•™å¶æ•°å¹¶ä¹˜ä»¥2
const result = numbers.flatMap(n => 
  n % 2 === 0 ? [n * 2] : []
);
console.log(result); // [4, 8, 12]

// ç­‰ä»·äº filter + map
console.log(
  numbers.filter(n => n % 2 === 0).map(n => n * 2)
);
```

#### åœºæ™¯4ï¼šå±•å¼€åµŒå¥—å±æ€§

```javascript
const users = [
  { name: 'å¼ ä¸‰', emails: ['zhang@a.com', 'zhang@b.com'] },
  { name: 'æå››', emails: ['li@a.com'] },
  { name: 'ç‹äº”', emails: [] }
];

// è·å–æ‰€æœ‰é‚®ç®±åŠå¯¹åº”ç”¨æˆ·
const emailList = users.flatMap(user => 
  user.emails.map(email => ({
    name: user.name,
    email
  }))
);

console.log(emailList);
// [
//   { name: 'å¼ ä¸‰', email: 'zhang@a.com' },
//   { name: 'å¼ ä¸‰', email: 'zhang@b.com' },
//   { name: 'æå››', email: 'li@a.com' }
// ]
```

#### åœºæ™¯5ï¼šè§£æå¹¶å±•å¼€æ•°æ®

```javascript
const data = [
  { id: 1, tags: 'js,ts,react' },
  { id: 2, tags: 'vue,js' },
  { id: 3, tags: 'python,django' }
];

// è·å–æ‰€æœ‰å”¯ä¸€æ ‡ç­¾
const allTags = [...new Set(
  data.flatMap(item => item.tags.split(','))
)];
console.log(allTags);
// ['js', 'ts', 'react', 'vue', 'python', 'django']

// æŒ‰æ ‡ç­¾åˆ†ç»„
const tagMap = data.flatMap(item => 
  item.tags.split(',').map(tag => ({ tag, id: item.id }))
).reduce((acc, { tag, id }) => {
  if (!acc[tag]) acc[tag] = [];
  acc[tag].push(id);
  return acc;
}, {});

console.log(tagMap);
// { js: [1, 2], ts: [1], react: [1], vue: [2], python: [3], django: [3] }
```

---

## 3. Object.fromEntries()

### 3.1 åŸºæœ¬è¯­æ³•

`Object.fromEntries()` å°†é”®å€¼å¯¹åˆ—è¡¨è½¬æ¢ä¸ºå¯¹è±¡ï¼Œæ˜¯ `Object.entries()` çš„é€†æ“ä½œã€‚

```javascript
// ä»æ•°ç»„åˆ›å»ºå¯¹è±¡
const entries = [['name', 'å¼ ä¸‰'], ['age', 25]];
const obj = Object.fromEntries(entries);
console.log(obj); // { name: 'å¼ ä¸‰', age: 25 }

// ä»Mapåˆ›å»ºå¯¹è±¡
const map = new Map([['a', 1], ['b', 2]]);
const objFromMap = Object.fromEntries(map);
console.log(objFromMap); // { a: 1, b: 2 }
```

### 3.2 å®é™…åº”ç”¨åœºæ™¯

#### åœºæ™¯1ï¼šè½¬æ¢å¯¹è±¡

```javascript
// å°†å¯¹è±¡å€¼ç¿»å€
const prices = { apple: 10, banana: 5, orange: 8 };

const doublePrices = Object.fromEntries(
  Object.entries(prices).map(([key, value]) => [key, value * 2])
);

console.log(doublePrices);
// { apple: 20, banana: 10, orange: 16 }
```

#### åœºæ™¯2ï¼šè¿‡æ»¤å¯¹è±¡å±æ€§

```javascript
const user = {
  name: 'å¼ ä¸‰',
  age: 25,
  password: 'secret',
  email: 'test@example.com',
  token: 'abc123'
};

// è¿‡æ»¤æ•æ„Ÿå­—æ®µ
const safeKeys = ['name', 'age', 'email'];
const safeUser = Object.fromEntries(
  Object.entries(user).filter(([key]) => safeKeys.includes(key))
);

console.log(safeUser);
// { name: 'å¼ ä¸‰', age: 25, email: 'test@example.com' }
```

#### åœºæ™¯3ï¼šURLæŸ¥è¯¢å‚æ•°è½¬å¯¹è±¡

```javascript
// è§£æURLæŸ¥è¯¢å­—ç¬¦ä¸²
function parseQueryString(queryString) {
  return Object.fromEntries(
    new URLSearchParams(queryString)
  );
}

const params = parseQueryString('name=å¼ ä¸‰&age=25&city=åŒ—äº¬');
console.log(params);
// { name: 'å¼ ä¸‰', age: '25', city: 'åŒ—äº¬' }

// æ›´å®Œæ•´çš„å®ç°
function parseQuery(url) {
  const queryString = url.split('?')[1] || '';
  return Object.fromEntries(
    queryString.split('&')
      .filter(Boolean)
      .map(pair => {
        const [key, value] = pair.split('=');
        return [decodeURIComponent(key), decodeURIComponent(value || '')];
      })
  );
}
```

#### åœºæ™¯4ï¼šå¯¹è±¡é”®åè½¬æ¢

```javascript
// é©¼å³°è½¬ä¸‹åˆ’çº¿
function camelToSnake(obj) {
  return Object.fromEntries(
    Object.entries(obj).map(([key, value]) => [
      key.replace(/[A-Z]/g, letter => `_${letter.toLowerCase()}`),
      value
    ])
  );
}

const camelObj = { firstName: 'å¼ ', lastName: 'ä¸‰', phoneNumber: '123' };
console.log(camelToSnake(camelObj));
// { first_name: 'å¼ ', last_name: 'ä¸‰', phone_number: '123' }

// ä¸‹åˆ’çº¿è½¬é©¼å³°
function snakeToCamel(obj) {
  return Object.fromEntries(
    Object.entries(obj).map(([key, value]) => [
      key.replace(/_([a-z])/g, (_, letter) => letter.toUpperCase()),
      value
    ])
  );
}

const snakeObj = { first_name: 'å¼ ', last_name: 'ä¸‰' };
console.log(snakeToCamel(snakeObj));
// { firstName: 'å¼ ', lastName: 'ä¸‰' }
```

#### åœºæ™¯5ï¼šåˆ†ç»„æ•°æ®è½¬å¯¹è±¡

```javascript
const students = [
  { name: 'å¼ ä¸‰', grade: 'A' },
  { name: 'æå››', grade: 'B' },
  { name: 'ç‹äº”', grade: 'A' },
  { name: 'èµµå…­', grade: 'C' }
];

// æŒ‰æˆç»©åˆ†ç»„
const groupedByGrade = Object.fromEntries(
  Array.from(
    students.reduce((map, student) => {
      const list = map.get(student.grade) || [];
      list.push(student.name);
      map.set(student.grade, list);
      return map;
    }, new Map())
  )
);

console.log(groupedByGrade);
// { A: ['å¼ ä¸‰', 'ç‹äº”'], B: ['æå››'], C: ['èµµå…­'] }
```

#### åœºæ™¯6ï¼šåˆå¹¶å¯¹è±¡æ•°ç»„

```javascript
// å°†æ•°ç»„è½¬æ¢ä¸ºä»¥idä¸ºé”®çš„å¯¹è±¡
const items = [
  { id: 1, name: 'å•†å“1', price: 100 },
  { id: 2, name: 'å•†å“2', price: 200 },
  { id: 3, name: 'å•†å“3', price: 300 }
];

const itemsById = Object.fromEntries(
  items.map(item => [item.id, item])
);

console.log(itemsById);
// {
//   1: { id: 1, name: 'å•†å“1', price: 100 },
//   2: { id: 2, name: 'å•†å“2', price: 200 },
//   3: { id: 3, name: 'å•†å“3', price: 300 }
// }

// å¿«é€ŸæŸ¥æ‰¾
console.log(itemsById[2]); // { id: 2, name: 'å•†å“2', price: 200 }
```

---

## 4. String.prototype.trimStart() / trimEnd()

### 4.1 åŸºæœ¬è¯­æ³•

```javascript
// trimStart() - åˆ é™¤å­—ç¬¦ä¸²å¼€å¤´çš„ç©ºç™½
const str1 = '   Hello World   ';
console.log(str1.trimStart()); // 'Hello World   '

// trimEnd() - åˆ é™¤å­—ç¬¦ä¸²ç»“å°¾çš„ç©ºç™½
console.log(str1.trimEnd());   // '   Hello World'

// trim() - åˆ é™¤ä¸¤ç«¯çš„ç©ºç™½
console.log(str1.trim());      // 'Hello World'

// åˆ«å
console.log(str1.trimLeft());  // åŒ trimStart()
console.log(str1.trimRight()); // åŒ trimEnd()
```

### 4.2 å®é™…åº”ç”¨åœºæ™¯

```javascript
// åœºæ™¯1ï¼šå¤„ç†ç”¨æˆ·è¾“å…¥
function processInput(input) {
  return input
    .trimStart()  // ç§»é™¤å¼€å¤´ç©ºç™½
    .trimEnd();   // ç§»é™¤ç»“å°¾ç©ºç™½
}

// åœºæ™¯2ï¼šæ ¼å¼åŒ–ä»£ç 
function formatCode(code) {
  return code
    .split('\n')
    .map(line => line.trimEnd()) // ç§»é™¤æ¯è¡Œæœ«å°¾ç©ºç™½
    .join('\n');
}

// åœºæ™¯3ï¼šå¤„ç†å¤šè¡Œæ–‡æœ¬
const multiLine = `
  ç¬¬ä¸€è¡Œ
  ç¬¬äºŒè¡Œ
  ç¬¬ä¸‰è¡Œ
`.trimStart().trimEnd();

console.log(multiLine);
// 'ç¬¬ä¸€è¡Œ\n  ç¬¬äºŒè¡Œ\n  ç¬¬ä¸‰è¡Œ'

// åœºæ™¯4ï¼šCSVè§£æ
function parseCSVLine(line) {
  return line.split(',').map(cell => cell.trimStart().trimEnd());
}

console.log(parseCSVLine('  å¼ ä¸‰  ,  25  ,  åŒ—äº¬  '));
// ['å¼ ä¸‰', '25', 'åŒ—äº¬']
```

---

## 5. Symbol.prototype.description

### 5.1 åŸºæœ¬è¯­æ³•

```javascript
// è·å–Symbolçš„æè¿°
const sym = Symbol('æˆ‘çš„Symbol');
console.log(sym.description); // 'æˆ‘çš„Symbol'

// æ— æè¿°çš„Symbol
const sym2 = Symbol();
console.log(sym2.description); // undefined

// ä¹‹å‰çš„æ–¹å¼ï¼ˆéœ€è¦toStringå¹¶æˆªå–ï¼‰
console.log(sym.toString()); // 'Symbol(æˆ‘çš„Symbol)'
```

### 5.2 å®é™…åº”ç”¨åœºæ™¯

```javascript
// åœºæ™¯1ï¼šè°ƒè¯•å’Œæ—¥å¿—
const ACTION_TYPES = {
  FETCH: Symbol('FETCH_DATA'),
  UPDATE: Symbol('UPDATE_DATA'),
  DELETE: Symbol('DELETE_DATA')
};

function logAction(action) {
  console.log(`æ‰§è¡Œæ“ä½œ: ${action.description || 'æœªçŸ¥'}`);
}

logAction(ACTION_TYPES.FETCH); // 'æ‰§è¡Œæ“ä½œ: FETCH_DATA'

// åœºæ™¯2ï¼šSymbolæ³¨å†Œè¡¨
const symbolRegistry = new Map();

function registerSymbol(sym) {
  const desc = sym.description || 'anonymous';
  symbolRegistry.set(sym, { description: desc, createdAt: new Date() });
}

const mySym = Symbol('myFeature');
registerSymbol(mySym);
console.log(symbolRegistry.get(mySym));
// { description: 'myFeature', createdAt: ... }

// åœºæ™¯3ï¼šç±»å‹æ£€æŸ¥
function isSpecificSymbol(sym, expectedDesc) {
  return typeof sym === 'symbol' && sym.description === expectedDesc;
}

console.log(isSpecificSymbol(Symbol('test'), 'test')); // true
```

---

## 6. å¯é€‰çš„catchç»‘å®š

### 6.1 åŸºæœ¬è¯­æ³•

ES10å…è®¸åœ¨catchè¯­å¥ä¸­çœç•¥é”™è¯¯å‚æ•°ã€‚

```javascript
// ES10ä¹‹å‰
try {
  JSON.parse('invalid');
} catch (error) {
  // å¿…é¡»å£°æ˜errorï¼Œå³ä½¿ä¸ä½¿ç”¨
  console.log('è§£æå¤±è´¥');
}

// ES10ä¹‹å
try {
  JSON.parse('invalid');
} catch {
  // å¯ä»¥çœç•¥errorå‚æ•°
  console.log('è§£æå¤±è´¥');
}
```

### 6.2 å®é™…åº”ç”¨åœºæ™¯

```javascript
// åœºæ™¯1ï¼šæ£€æŸ¥åŠŸèƒ½æ˜¯å¦å¯ç”¨
function isFeatureAvailable() {
  try {
    // å°è¯•ä½¿ç”¨æŸä¸ªåŠŸèƒ½
    eval('const a = 1');
    return true;
  } catch {
    return false;
  }
}

// åœºæ™¯2ï¼šå®‰å…¨çš„JSONè§£æ
function safeParseJSON(str, defaultValue = null) {
  try {
    return JSON.parse(str);
  } catch {
    return defaultValue;
  }
}

console.log(safeParseJSON('{"a":1}')); // { a: 1 }
console.log(safeParseJSON('invalid')); // null
console.log(safeParseJSON('invalid', {})); // {}

// åœºæ™¯3ï¼šç‰¹æ€§æ£€æµ‹
function supportsOptionalChaining() {
  try {
    eval('const a = {}; a?.b;');
    return true;
  } catch {
    return false;
  }
}

// åœºæ™¯4ï¼šå¿½ç•¥ç‰¹å®šé”™è¯¯
function clearStorage() {
  try {
    localStorage.clear();
  } catch {
    // å¯èƒ½åœ¨éšç§æ¨¡å¼ä¸‹å¤±è´¥ï¼Œå¿½ç•¥é”™è¯¯
  }
}

// åœºæ™¯5ï¼šé™é»˜å¤±è´¥
function reportError(error) {
  try {
    // å‘é€é”™è¯¯æŠ¥å‘Š
    navigator.sendBeacon('/api/errors', JSON.stringify(error));
  } catch {
    // å¦‚æœå‘é€å¤±è´¥ï¼Œé™é»˜å¤„ç†
  }
}
```

---

## 7. Function.prototype.toString()ä¿®è®¢

### 7.1 åŸºæœ¬æ¦‚å¿µ

ES10è¦æ±‚ `toString()` è¿”å›å‡½æ•°çš„åŸå§‹æºä»£ç ï¼ŒåŒ…æ‹¬ç©ºæ ¼å’Œæ³¨é‡Šã€‚

```javascript
function /* æ³¨é‡Š */ foo /* å¦ä¸€ä¸ªæ³¨é‡Š */ () {
  // å‡½æ•°ä½“
}

// ES10ä¹‹å‰å¯èƒ½è¿”å›ï¼šfunction foo() {}
// ES10ä¹‹åè¿”å›åŸå§‹æºä»£ç ï¼š
console.log(foo.toString());
// 'function /* æ³¨é‡Š */ foo /* å¦ä¸€ä¸ªæ³¨é‡Š */ () {\n  // å‡½æ•°ä½“\n}'

// ç®­å¤´å‡½æ•°
const arrow = /* ç®­å¤´ */ (a, b) => a + b;
console.log(arrow.toString());
// '/* ç®­å¤´ */ (a, b) => a + b'
```

### 7.2 å®é™…åº”ç”¨åœºæ™¯

```javascript
// åœºæ™¯1ï¼šå‡½æ•°åºåˆ—åŒ–
function serializeFunction(fn) {
  return {
    name: fn.name,
    source: fn.toString(),
    length: fn.length
  };
}

function add(a, b) {
  return a + b;
}

console.log(serializeFunction(add));
// { name: 'add', source: 'function add(a, b) {\n  return a + b;\n}', length: 2 }

// åœºæ™¯2ï¼šæå–å‡½æ•°å‚æ•°
function getParameterNames(fn) {
  const source = fn.toString();
  const match = source.match(/\(([^)]*)\)/);
  if (!match) return [];
  
  return match[1]
    .split(',')
    .map(param => param.trim())
    .filter(Boolean);
}

function example(name, age, city = 'åŒ—äº¬') {}
console.log(getParameterNames(example));
// ['name', 'age', 'city = \'åŒ—äº¬\'']

// åœºæ™¯3ï¼šä»£ç åˆ†æ
function hasAwait(fn) {
  return fn.toString().includes('await');
}

async function asyncFn() {
  await Promise.resolve();
}

console.log(hasAwait(asyncFn)); // true
```

---

## 8. Array.prototype.sort()ç¨³å®šæ€§

### 8.1 åŸºæœ¬æ¦‚å¿µ

ES10è§„èŒƒè¦æ±‚ `Array.prototype.sort()` å¿…é¡»æ˜¯ç¨³å®šæ’åºã€‚

```javascript
// ç¨³å®šæ’åºï¼šç›¸ç­‰å…ƒç´ ä¿æŒåŸå§‹é¡ºåº
const students = [
  { name: 'å¼ ä¸‰', score: 90 },
  { name: 'æå››', score: 80 },
  { name: 'ç‹äº”', score: 90 },
  { name: 'èµµå…­', score: 80 }
];

// æŒ‰åˆ†æ•°æ’åº
students.sort((a, b) => b.score - a.score);

console.log(students);
// [
//   { name: 'å¼ ä¸‰', score: 90 },  // å¼ ä¸‰åœ¨ç‹äº”å‰é¢ï¼ˆä¿æŒåŸé¡ºåºï¼‰
//   { name: 'ç‹äº”', score: 90 },
//   { name: 'æå››', score: 80 },  // æå››åœ¨èµµå…­å‰é¢ï¼ˆä¿æŒåŸé¡ºåºï¼‰
//   { name: 'èµµå…­', score: 80 }
// ]
```

### 8.2 å®é™…åº”ç”¨åœºæ™¯

```javascript
// åœºæ™¯1ï¼šå¤šçº§æ’åº
const products = [
  { name: 'å•†å“A', category: 'ç”µå­', price: 100 },
  { name: 'å•†å“B', category: 'æœè£…', price: 50 },
  { name: 'å•†å“C', category: 'ç”µå­', price: 200 },
  { name: 'å•†å“D', category: 'æœè£…', price: 50 },
  { name: 'å•†å“E', category: 'ç”µå­', price: 100 }
];

// å…ˆæŒ‰ç±»åˆ«æ’åºï¼Œå†æŒ‰ä»·æ ¼æ’åº
products
  .sort((a, b) => a.category.localeCompare(b.category))
  .sort((a, b) => a.price - b.price);

// ç”±äºç¨³å®šæ’åºï¼ŒåŒä»·æ ¼çš„å•†å“ä¿æŒç±»åˆ«æ’åºçš„é¡ºåº

// åœºæ™¯2ï¼šä¿æŒæ·»åŠ é¡ºåº
const tasks = [
  { id: 1, priority: 'high', addedAt: 1 },
  { id: 2, priority: 'low', addedAt: 2 },
  { id: 3, priority: 'high', addedAt: 3 },
  { id: 4, priority: 'low', addedAt: 4 }
];

const priorityOrder = { high: 0, medium: 1, low: 2 };

tasks.sort((a, b) => priorityOrder[a.priority] - priorityOrder[b.priority]);

// åŒä¼˜å…ˆçº§çš„ä»»åŠ¡ä¿æŒæ·»åŠ é¡ºåº
console.log(tasks.map(t => t.id)); // [1, 3, 2, 4]
```

---

## 9. JSONæ”¹è¿›

### 9.1 JSON.stringify()å¢å¼º

ES10æ”¹è¿›äº† `JSON.stringify()` å¯¹ä¸æ”¯æŒçš„Unicodeå­—ç¬¦çš„å¤„ç†ã€‚

```javascript
// ä¹‹å‰ï¼šå¯èƒ½äº§ç”Ÿæ— æ•ˆçš„Unicodeå­—ç¬¦ä¸²
// ç°åœ¨ï¼šä½¿ç”¨è½¬ä¹‰åºåˆ—

// å•ç‹¬çš„ä»£ç†å¯¹ç°åœ¨ä¼šè¢«æ­£ç¡®è½¬ä¹‰
const str = '\uD800'; // å•ç‹¬çš„é«˜ä»£ç†
console.log(JSON.stringify(str)); // '"\\ud800"'

// æ­£å¸¸çš„ä»£ç†å¯¹
const emoji = '\uD83D\uDE00'; // ğŸ˜€
console.log(JSON.stringify(emoji)); // '"ğŸ˜€"'
```

### 9.2 JSONè¶…é›†

ES10ä½¿ECMAScriptæˆä¸ºJSONçš„è¶…é›†ï¼Œå…è®¸åœ¨å­—ç¬¦ä¸²ä¸­ç›´æ¥ä½¿ç”¨U+2028ï¼ˆè¡Œåˆ†éš”ç¬¦ï¼‰å’ŒU+2029ï¼ˆæ®µè½åˆ†éš”ç¬¦ï¼‰ã€‚

```javascript
// ES10ä¹‹å‰ï¼Œè¿™ä¼šå¯¼è‡´è¯­æ³•é”™è¯¯
// const str = 'line1\u2028line2';

// ES10ä¹‹åï¼Œè¿™æ˜¯åˆæ³•çš„
const str = 'line1\u2028line2';
console.log(str);

// è¿™å¯¹äºå¤„ç†JSONæ•°æ®å¾ˆé‡è¦
const jsonData = '{"text": "line1\u2028line2"}';
console.log(JSON.parse(jsonData));
```

---

## æ€»ç»“

ES10 (ES2019) çš„ä¸»è¦æ–°ç‰¹æ€§ï¼š

### Array.prototype.flat() / flatMap()
- `flat()` æ‰å¹³åŒ–åµŒå¥—æ•°ç»„
- `flatMap()` æ˜ å°„å¹¶æ‰å¹³åŒ–
- ç®€åŒ–æ•°ç»„å¤„ç†æ“ä½œ

### Object.fromEntries()
- é”®å€¼å¯¹æ•°ç»„è½¬å¯¹è±¡
- æ˜¯ `Object.entries()` çš„é€†æ“ä½œ
- ä¾¿äºå¯¹è±¡è½¬æ¢å’Œè¿‡æ»¤

### String.prototype.trimStart() / trimEnd()
- åˆ é™¤å­—ç¬¦ä¸²å¼€å¤´æˆ–ç»“å°¾çš„ç©ºç™½
- æ›´ç²¾ç¡®çš„ç©ºç™½æ§åˆ¶

### Symbol.prototype.description
- ç›´æ¥è·å–Symbolçš„æè¿°
- ä¾¿äºè°ƒè¯•å’Œæ—¥å¿—

### å¯é€‰çš„catchç»‘å®š
- catchè¯­å¥å¯ä»¥çœç•¥é”™è¯¯å‚æ•°
- ç®€åŒ–ä¸éœ€è¦é”™è¯¯ä¿¡æ¯çš„åœºæ™¯

### Function.prototype.toString()ä¿®è®¢
- è¿”å›å‡½æ•°çš„å®Œæ•´æºä»£ç 
- åŒ…æ‹¬æ³¨é‡Šå’Œç©ºæ ¼

### Array.prototype.sort()ç¨³å®šæ€§
- ä¿è¯ç›¸ç­‰å…ƒç´ çš„åŸå§‹é¡ºåº
- å¤šçº§æ’åºæ›´å¯é 

### JSONæ”¹è¿›
- æ›´å¥½çš„Unicodeæ”¯æŒ
- ECMAScriptæˆä¸ºJSONè¶…é›†

è¿™äº›ç‰¹æ€§è¿›ä¸€æ­¥æå‡äº†JavaScriptçš„æ•°æ®å¤„ç†èƒ½åŠ›å’Œä»£ç ç®€æ´æ€§ã€‚
